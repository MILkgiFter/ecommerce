# Отчет по настройке CI/CD Pipeline для E-commerce приложения

## 1. Настройка self-hosted runner

Для данного проекта был настроен self-hosted runner на мастер-ноде Docker Swarm кластера (swarm-master). Это обеспечивает:
- Прямой доступ к Docker Swarm API
- Отсутствие необходимости настраивать SSH-доступ
- Автоматический запуск CI/CD при push в main-ветку

## 2. Стадии pipeline и их логика

CI/CD pipeline включает следующие стадии:
1. **Checkout**: Получение последней версии кода из репозитория
2. **Build**: Сборка Docker-образа приложения
3. **Push**: Публикация образа в Docker-реестр
4. **Deploy**: Развертывание обновленного стека сервисов в Docker Swarm

## 3. Процесс развертывания

Для развертывания используется:
- **docker stack deploy**: Команда для обновления сервисов в Docker Swarm
- **docker-compose.yml**: Файл с описанием сервисов и конфигурацией
- **Размещение на worker-узлах**: Сервисы размещаются на рабочих узлах swarm-worker-1 и swarm-worker-2
- **Стратегия обновления**: "Rolling update" минимизирует простои

## 4. Демонстрация отказоустойчивости

Для демонстрации отказоустойчивости был проведен тест:
1. Приложение было развернуто в Docker Swarm с 2 репликами
2. Одна из рабочих нод была отключена
3. Docker Swarm автоматически переместил сервисы на доступные ноды
4. Приложение продолжало работать без простоев

## 5. Ограничения и особенности

- **Отказоустойчивость**: 2 реплики сервиса обеспечивают высокую доступность
- **Автоматическое восстановление**: Docker Swarm автоматически перемещает сервисы при отказе узла
- **Зависимость от MongoDB**: Приложение использует внешнюю MongoDB